<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="MyShop.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyShop"
    xmlns:models="using:MyShop.Models.Reports"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="MyShop - Product">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>
    
    <Grid>
        <!-- Login Container (shown when not logged in) -->
        <Grid x:Name="LoginContainer" Visibility="Visible">
            <Frame x:Name="LoginFrame"/>
        </Grid>
        
        <!-- Main Content Container (shown when logged in) -->
        <NavigationView x:Name="NavView"
                        IsBackButtonVisible="Collapsed"
                        IsSettingsVisible="False"
                        PaneDisplayMode="Left"
                        SelectionChanged="NavView_SelectionChanged"
                        Visibility="Collapsed">
            
            <NavigationView.MenuItems>
                <NavigationViewItem Content="Dashboard" 
                                  Tag="Dashboard"
                                  Icon="Home">
                    <NavigationViewItem.InfoBadge>
                        <InfoBadge Style="{StaticResource AttentionIconInfoBadgeStyle}"/>
                    </NavigationViewItem.InfoBadge>
                </NavigationViewItem>
                
                <NavigationViewItem Content="Danh Sách Sản Phẩm" 
                                  Tag="ProductList"
                                  Icon="Shop">
                    <NavigationViewItem.InfoBadge>
                        <InfoBadge Value="{x:Bind ViewModel.TotalProducts, Mode=OneWay}" 
                                  Style="{StaticResource AttentionValueInfoBadgeStyle}"/>
                    </NavigationViewItem.InfoBadge>
                </NavigationViewItem>
                
                <NavigationViewItemSeparator/>
                
                <NavigationViewItemHeader Content="Quản Lý"/>
                
                <NavigationViewItem Content="Thêm Sản Phẩm" 
                                  Tag="AddProduct"
                                  Icon="Add"/>
                
                <NavigationViewItem Content="Danh Mục" 
                                  Tag="Categories"
                                  Icon="Library"/>

                <NavigationViewItem Content="Khách Hàng" 
                                  Tag="Customers">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE77B;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Đơn Hàng" 
                                  Tag="OrdersList">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7BF;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Báo Cáo"
                    Tag="Reports">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE9D9;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Mã Giảm Giá" 
                                  Tag="Discounts">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE8F1;"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <NavigationView.PaneFooter>
                <StackPanel Orientation="Vertical" Spacing="8" Padding="16">
                    <TextBlock Text="API Status" 
                              Style="{StaticResource CaptionTextBlockStyle}"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE774;" 
                                 FontSize="12"
                                 Foreground="LimeGreen"/>
                        <TextBlock Text="Connected" 
                                  Style="{StaticResource BodyTextBlockStyle}"
                                  Foreground="LimeGreen"/>
                    </StackPanel>
                    <TextBlock Text="http://localhost:5002" 
                              Style="{StaticResource CaptionTextBlockStyle}"
                              Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>
                    
                    <!-- Logout Button -->
                    <Button HorizontalAlignment="Stretch"
                            Margin="0,8,0,0"
                            Click="LogoutButton_Click">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE8BB;" FontSize="14"/>
                            <TextBlock Text="Logout"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </NavigationView.PaneFooter>

            <Frame x:Name="ContentFrame" Padding="0"/>
            
        </NavigationView>
    </Grid>
</Window>
